function e(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var n=function(e,n){switch(n){case"number":return parseFloat(e);case"text":return e+""}return e},t=function(e,n){var t=e.id,r=e.name,u=e.type,a=void 0===u?"text":u,o=e.help,i=e.defaultValue,l=e.min,c=e.max,f=e.steps,p=[],d=function(e){return document.createElement(e)},m=d("input");m.type=a,m.id=t,"number"===a?("number"==typeof l&&(m.min=l),"number"==typeof c&&(m.max=c),"number"==typeof f&&(m.steps=f)):("number"==typeof l&&(m.minLength=l),"number"==typeof c&&(m.maxLength=c)),m.placeholder=o||i||"",(i||0===i)&&(m.value=i),m.addEventListener("input",function(e){return n(e.target.value)});var s=d("label");return s.innerHTML=r||t,s.htmlFor=t,p.push(s),p.push(m),{htmlElements:p,onStoreUpdate:function(e){m.value=e}}},r=function(e,n){var t=e.id,r=e.name,u=e.help,a=e.values,o=e.defaultValue,i=[],l=function(e){return document.createElement(e)},c=l("select");c.id=t,c.title=u||"",a.forEach(function(e){var n=l("option");"object"==typeof e?(n.value=e.value,n.innerHTML=e.name):n.value=n.innerHTML=e,c.appendChild(n)}),(o||0===o)&&(c.value=o),c.addEventListener("input",function(e){return n(e.target.value)});var f=document.createElement("label");return f.htmlFor=t,f.innerHTML=r||t,i.push(f),i.push(c),{htmlElements:i,onStoreUpdate:function(e){c.value=e}}},u=function(e,n){var t=e.id,r=e.defaultValue,u=e.help,a=[];return e.values.forEach(function(e){var o=document.createElement("input");o.type="radio",o.name=t,o.title=u||"";var i=document.createElement("label");"object"==typeof e?(o.value=e.value,o.id=t+"_"+e.value,i.innerHTML=e.name):(o.value=i.innerHTML=e,o.id=t+"_"+e),r+""==o.value+""&&(o.checked=!0),o.addEventListener("click",function(e){return n(e.target.value)}),i.htmlFor=o.id,a.push(o),a.push(i)}),{htmlElements:a,onStoreUpdate:function(e){var n=a.find(function(n){return n.value===e+""});n?n.checked=!0:a.forEach(function(e){"INPUT"===e.tagName&&(e.checked=!1)})}}},a=[function(e,n){if("input"===e.inputType)return t(e,n)},function(e,n){if("section"===e.type)return r=(t=e).id,u=t.name,(a=document.createElement("b")).innerHTML=u||r,{htmlElements:[a]};var t,r,u,a},function(e,n){if("boolean"===e.type)return function(e,n){var t=e.id,r=e.name,u=e.help,a=e.defaultValue,o=[],i=function(e){return document.createElement(e)},l=i("input");l.type="checkbox",l.id=t,l.title=u||"","boolean"==typeof a&&(l.checked=a),l.addEventListener("input",function(e){return n(e.target.checked)});var c=i("label");return c.innerHTML=r||t,c.htmlFor=t,o.push(l),o.push(c),{htmlElements:o,onStoreUpdate:function(e){l.checked=!!e}}}(e,n)},function(e,n){if(e.values)return"radio"===e.inputType?u(e,n):"selection"===e.inputType?r(e,n):e.values.length<5?u(e,n):r(e,n)},function(e,n){if("number"===e.type&&!e.values&&"number"==typeof e.min&&"number"==typeof e.max&&(!e.steps||e.steps>=(e.min+e.max)/1e3))return function(e,n){var t=e.id,r=e.name,u=e.help,a=e.defaultValue,o=e.min,i=e.max,l=e.steps,c=[],f=function(e){return document.createElement(e)},p=f("input");p.type="range",p.id=t,p.min=o||0,(i||0===i)&&(p.max=i),l&&(p.step=l),p.placeholder=u||a||"",(a||0===a)&&(p.value=a);var d=f("label");d.innerHTML=r||t,d.htmlFor=t;var m=f("output");return m.innerHTML=p.value,p.addEventListener("input",function(e){m.innerHTML=e.target.value,n(e.target.value)}),c.push(d),c.push(p),c.push(m),{htmlElements:c,onStoreUpdate:function(e){p.value=e}}}(e,n)},function(e,n){return t(e,n)}],o=new Map;export default function(t){var r=(void 0===t?{}:t).plugins,u=void 0===r?[]:r,i=[],l=[],c=null;return{bind:function(t,r){return void 0===r&&(r={}),function t(r,u,a,i,l){Object.values(r).forEach(function(r){for(var c,f=r.id,p=r.type,d=r.defaultValue,m=r.options,s=r.onUpdate,v=function(n){var t=0;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(n=function(n,t){if(n){if("string"==typeof n)return e(n,void 0);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(n,void 0):void 0}}(n)))return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=n[Symbol.iterator]()).next.bind(t)}(i);!(c=v()).done;){var h=(0,c.value)(r,function(e){if(0===(e=n(e,p))||!1===e||e||(e=d||null),"function"==typeof s){var t=s(e,u[f]);u[f]=void 0!==t?t:e}else u[f]=e;l(f,e)});if(h){if(m)return a.push.apply(a,h.htmlElements||[]),u[f]={},void t(m,u[f],a,i,l);"function"==typeof h.onStoreUpdate&&o.set(f,h.onStoreUpdate),u[f]=d||null,a.push.apply(a,h.htmlElements||[]);break}}})}(t,r,l,[].concat(u,a),function(e,n){return i.forEach(function(t){return t(e,n)})}),c=r,r},addChangeListener:function(e){i.push(e)},removeChangeListener:function(e){i.splice(i.indexOf(e))},render:function(e){void 0===e&&(e="div");var n=document.createElement(e);return n.className="settings-ui-wrapper",l.forEach(function(e){return n.appendChild(e)}),{to:function(e){return e.appendChild(n),n},replace:function(e){return e.parentElement.replaceChild(n,e),n},get:function(){return n}}},update:function(e){e?(o.get(e)(c[e]),i.forEach(function(n){return n(e,c[e])})):function e(n){Object.entries(n).forEach(function(n){var t=n[0],r=n[1];r&&"object"==typeof r?e(r):(o.get(t)(r),i.forEach(function(e){return e(t,r)}))})}(c)}}}
//# sourceMappingURL=index.mjs.map
